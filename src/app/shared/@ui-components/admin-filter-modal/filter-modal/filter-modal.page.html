<ion-content [fullscreen]="true">
  <div class="modal-wrap">
    <div class="backdrop"></div>
    <div class="filter-content">
      <ion-row>        
        <ion-col size="9">
          <h3 class="title">{{'Data.filter' | translate}}</h3>
        </ion-col>
        <ion-col class="close-icon" size="3">
          <ion-buttons>
            <ion-button color="danger" (click)="close()">
              <ion-icon name="close-circle-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-col>
      </ion-row>
      <div class="form">      
        <div class="form-input filter" *ngIf="display.startDate">
          <ion-label position="stacked">{{'Data.StartDate' | translate}}</ion-label>
          <ion-item>
            <ion-datetime  [(ngModel)]="filter.startDate" [displayFormat]="'Data.DatePikerFormate' | translate" cancelText="{{'Data.Cancel' | translate}}"
              doneText="{{'Data.Ok' | translate}}" [monthNames]="'Data.Months' | translate"  [max]="maxData">
            </ion-datetime>
            <ion-icon
              name="calendar-clear-outline"
              size="small"
              slot="start"
            ></ion-icon>
          </ion-item>
        </div>  
        
        <div class="form-input filter" *ngIf="display.endDate">
          <ion-label position="stacked">{{'Data.EndDate' | translate}}</ion-label>
          <ion-item> 
            <ion-datetime [(ngModel)]="filter.endDate" 
              [displayFormat]="'Data.DatePikerFormate' | translate"
              cancelText="{{'Data.Cancel' | translate}}"
              doneText="{{'Data.Ok' | translate}}"
              [monthNames]="'Data.Months' | translate" [min]="filter.startDate" [max]="maxData">
            </ion-datetime>
            <ion-icon
              name="calendar-clear-outline"
              size="small"
              slot="start"
            ></ion-icon>
          </ion-item>
        </div>

        <div class="form-input filter" *ngIf="display.dayDate">
          <ion-label position="stacked">{{'Data.AttendanceDate' | translate}}</ion-label>
          <ion-item>
            <ion-datetime  [(ngModel)]="filter.dayDate" [displayFormat]="'Data.DatePikerFormate' | translate" cancelText="{{'Data.Cancel' | translate}}"
              doneText="{{'Data.Ok' | translate}}" [monthNames]="'Data.Months' | translate" [max]="maxData">
            </ion-datetime>
            <ion-icon
              name="calendar-clear-outline"
              size="small"
              slot="start"
            ></ion-icon>
          </ion-item>
        </div> 

        <div class="form-input filter" *ngIf="display.monthYear">
          <ion-label position="stacked">{{'Data.MonthYear' | translate}}</ion-label>
          <ion-item>
            <ion-datetime  [(ngModel)]="filter.monthYear" displayFormat="MMMM YYYY" cancelText="{{'Data.Cancel' | translate}}"
              doneText="{{'Data.Ok' | translate}}" [monthNames]="'Data.Months' | translate" [max]="maxData">
            </ion-datetime>
            <ion-icon
              name="calendar-clear-outline"
              size="small"
              slot="start"
            ></ion-icon>
          </ion-item>
        </div> 

        <div class="form-input filter" *ngIf="display.minimum">
          <ion-label position="stacked">{{'Data.minimumHours' | translate}}</ion-label>
          <ion-item>
            <ion-input type="number" 
              [(ngModel)]="filter.minimum">
            </ion-input>
          </ion-item>
        </div> 


        <div class="form-input filter" *ngIf="display.status">
          <ion-label position="stacked">{{ 'Data.Status' | translate }} </ion-label>
          <ion-item>
            <ion-select multiple="true" [okText]="'Data.Ok' | translate" [cancelText]="'Data.Cancel' | translate"
            [(ngModel)]="filter.statusIdList" interface="action-sheet">
              <ion-select-option *ngFor="let item of statusList" [value]="item.id" >
                {{ localize.isEnglish() ? item.nameFl  :item.nameSl }} 
              </ion-select-option>
            </ion-select>
            <ion-icon name="stats-chart-outline" size="small" slot="start"></ion-icon>
          </ion-item>
        </div>

        <div class="form-input filter" *ngIf="display.leave">
          <ion-label position="stacked">{{ 'Data.LeaveType' | translate }} </ion-label>
          <ion-item>
            <ion-select multiple="true" [okText]="'Data.Ok' | translate" [cancelText]="'Data.Cancel' | translate"
            [(ngModel)]="filter.leaveRegulationId" interface="action-sheet">
            <ion-select-option *ngFor="let leave of typeList" [value]="leave.id">
              {{ localize.isEnglish() ? leave.nameFl  : leave.nameSl }}
             </ion-select-option>
            </ion-select>
            <ion-icon name="stats-chart-outline" size="small" slot="start"></ion-icon>
          </ion-item>
        </div>

        <div class="form-input filter" *ngIf="display.allowance">
          <ion-label position="stacked">{{ 'Data.AllowanceType' | translate }} </ion-label>
          <ion-item>
            <ion-select multiple="true" [okText]="'Data.Ok' | translate" [cancelText]="'Data.Cancel' | translate"
            [(ngModel)]="filter.allowanceId" interface="action-sheet">
              <ion-select-option *ngFor="let allowance of typeList" [value]="allowance.id">
                {{ localize.isEnglish() ? allowance.nameFl : allowance.nameSl }}
              </ion-select-option>
            </ion-select>
            <ion-icon name="stats-chart-outline" size="small" slot="start"></ion-icon>
          </ion-item>
        </div>

        <div class="form-input filter" *ngIf="display.fullPermission">
          <ion-label position="stacked">{{ 'Data.FullDayPermission' | translate }} </ion-label>
          <ion-item>
            <ion-select multiple="true" [okText]="'Data.Ok' | translate" [cancelText]="'Data.Cancel' | translate"
            [(ngModel)]="filter.fullDayId" interface="action-sheet">
              <ion-select-option *ngFor="let permission of typeList" [value]="permission.id">
                {{ localize.isEnglish() ? permission.nameFl : permission.nameSl }}
              </ion-select-option>
            </ion-select>
            <ion-icon name="stats-chart-outline" size="small" slot="start"></ion-icon>
          </ion-item>
        </div>

        <div class="form-input filter" *ngIf="display.partPermission">
          <ion-label position="stacked">{{ 'Data.Type' | translate }} </ion-label>
          <ion-item>
            <ion-select multiple="true" [okText]="'Data.Ok' | translate" [cancelText]="'Data.Cancel' | translate"
            [(ngModel)]="filter.partialPermissionTypeId" interface="action-sheet">
             <ion-select-option *ngFor="let item of typeList" [value]="item.id">             
              {{ localize.isEnglish() ? item.partialPermissionFL : item.partialPermissionSL }}
            </ion-select-option>
            </ion-select>
            <ion-icon name="stats-chart-outline" size="small" slot="start"></ion-icon>
          </ion-item>
        </div>
  

        <div class="form-input filter" *ngIf="display.employee">
          <ion-label position="stacked">{{ 'Data.EmployeeSearch' | translate }} </ion-label>
          <ion-item>
            <ion-icon name="person"></ion-icon>    
            <ionic-selectable
              [(ngModel)]="employee"
              itemValueField="id"
              itemTextField="{{localize.translate.instant('Fields.fullName')}}"
              [items]="employees"
              [canSearch]="true"
              [canClear]="true"
              closeButtonText="{{localize.translate.instant('Data.Close')}}"
              clearButtonText="{{localize.translate.instant('Data.Clear')}}"                
              searchPlaceholder="{{localize.translate.instant('Data.EmployeeSearch')}}"
              [searchDebounce]="1000"
              modalCssClass="ionic-selectable-documentation-configuration"
              headerColor="favorite" 
              closeButtonSlot="end"   
              [searchFailText]="localize.translate.instant('Data.EmployeeSearchFilterNoData')"
              (onChange)="employeeChange($event)"
              (onSearch)="searchemployees($event)">
              <ng-template ionicSelectableTitleTemplate>        
                  {{localize.translate.instant('Data.EmployeeSearch')}}
              </ng-template>
            </ionic-selectable>    
          </ion-item>
        </div>
        <div class="form-input filter" *ngIf="display.administration">
          <ion-label position="stacked">{{ 'Data.AdministrationSearch' | translate }} </ion-label>
          <ion-item >
            <ion-icon name="business-sharp"></ion-icon>
            <ionic-selectable
              [(ngModel)]="departments"
              [items]="items3"
              itemValueField="id"
              itemTextField="{{localize.translate.instant('Fields.name')}}"
              [canSearch]="true"
              [canClear]="true"
              [isMultiple]="true"
              closeButtonText="{{localize.translate.instant('Data.Close')}}"
              clearButtonText="{{localize.translate.instant('Data.Clear')}}"
              confirmButtonText="{{localize.translate.instant('Data.Apply')}}"
              searchPlaceholder="{{localize.translate.instant('Data.AdministrationSearch')}}"
              [searchDebounce]="1000"
              modalCssClass="ionic-selectable-documentation-configuration"
              headerColor="favorite" 
              closeButtonSlot="end"
              (onChange)="departmentChange($event)">
              <ng-template ionicSelectableTitleTemplate>        
                {{localize.translate.instant('Data.AdministrationSearch')}}
            </ng-template>
            </ionic-selectable>
          </ion-item>        
        </div>




        <div class="action-btns d-flex">
          <div class="btn reset-btn">
            <ion-button
              (click)="resetFilter()"
              class="submit-btn"
              color="light"
              expand="full"
            >
              {{ 'Data.Clear' | translate }}
            </ion-button>
          </div>
          <div class="btn apply-btn">
            <ion-button
              (click)="apply()"
              class="submit-btn"
              color="danger"
              expand="full"
            >
              {{ 'Data.Apply' | translate }}
            </ion-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
